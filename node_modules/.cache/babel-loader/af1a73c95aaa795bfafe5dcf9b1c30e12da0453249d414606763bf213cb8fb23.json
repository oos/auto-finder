{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/oos/oos_projects/auto-finder/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject0,_templateObject1,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14;import React,{useState}from'react';import{useQuery,useMutation,useQueryClient}from'react-query';import styled from'styled-components';import axios from'axios';import toast from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  max-width: 1200px;\\n  margin: 0 auto;\\n  padding: \",\";\\n\"])),props=>props.theme.spacing.lg);const Title=styled.h1(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  margin-bottom: \",\";\\n\"])),props=>props.theme.colors.primary,props=>props.theme.spacing.xl);const Section=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  padding: \",\";\\n  border-radius: \",\";\\n  box-shadow: \",\";\\n  margin-bottom: \",\";\\n\"])),props=>props.theme.colors.white,props=>props.theme.spacing.lg,props=>props.theme.borderRadius,props=>props.theme.boxShadow,props=>props.theme.spacing.lg);const SectionTitle=styled.h2(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  margin-bottom: \",\";\\n  font-size: 1.3rem;\\n\"])),props=>props.theme.colors.primary,props=>props.theme.spacing.lg);const StatusCard=styled.div(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\\n  gap: \",\";\\n  margin-bottom: \",\";\\n\"])),props=>props.theme.spacing.lg,props=>props.theme.spacing.lg);const StatusItem=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  padding: \",\";\\n  border-radius: \",\";\\n  background: \",\";\\n  border: 2px solid \",\";\\n\"])),props=>props.theme.spacing.lg,props=>props.theme.borderRadius,props=>{switch(props.status){case'running':return'#fff3cd';case'completed':return'#d4edda';case'failed':return'#f8d7da';case'blocked':return'#f5c6cb';default:return'#f8f9fa';}},props=>{switch(props.status){case'running':return'#ffeaa7';case'completed':return'#c3e6cb';case'failed':return'#f1b0b7';case'blocked':return'#f1aeb5';default:return'#dee2e6';}});const StatusValue=styled.div(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  font-size: 2rem;\\n  font-weight: bold;\\n  color: \",\";\\n  margin-bottom: \",\";\\n\"])),props=>props.theme.colors.primary,props=>props.theme.spacing.sm);const StatusLabel=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\n  color: \",\";\\n  font-weight: 500;\\n\"])),props=>props.theme.colors.gray);const Button=styled.button(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  color: \",\";\\n  padding: \",\" \",\";\\n  border-radius: \",\";\\n  border: none;\\n  font-size: 1rem;\\n  font-weight: 500;\\n  cursor: pointer;\\n  transition: all 0.2s ease;\\n  margin-right: \",\";\\n  margin-bottom: \",\";\\n  \\n  &:hover {\\n    background: \",\";\\n  }\\n  \\n  &:disabled {\\n    background: \",\";\\n    cursor: not-allowed;\\n  }\\n\"])),props=>{switch(props.variant){case'danger':return props.theme.colors.danger;case'success':return props.theme.colors.success;default:return props.theme.colors.secondary;}},props=>props.theme.colors.white,props=>props.theme.spacing.md,props=>props.theme.spacing.lg,props=>props.theme.borderRadius,props=>props.theme.spacing.md,props=>props.theme.spacing.md,props=>{switch(props.variant){case'danger':return'#c0392b';case'success':return'#229954';default:return'#2980b9';}},props=>props.theme.colors.lightGray);const LogsTable=styled.table(_templateObject0||(_templateObject0=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  border-collapse: collapse;\\n  margin-top: \",\";\\n\"])),props=>props.theme.spacing.lg);const TableHeader=styled.th(_templateObject1||(_templateObject1=_taggedTemplateLiteral([\"\\n  background: \",\";\\n  padding: \",\";\\n  text-align: left;\\n  font-weight: 500;\\n  color: \",\";\\n  border-bottom: 2px solid \",\";\\n\"])),props=>props.theme.colors.light,props=>props.theme.spacing.md,props=>props.theme.colors.dark,props=>props.theme.colors.lightGray);const TableCell=styled.td(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n  padding: \",\";\\n  border-bottom: 1px solid \",\";\\n\"])),props=>props.theme.spacing.md,props=>props.theme.colors.lightGray);const StatusBadge=styled.span(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n  padding: \",\" \",\";\\n  border-radius: \",\";\\n  font-size: 0.8rem;\\n  font-weight: 500;\\n  background: \",\";\\n  color: \",\";\\n\"])),props=>props.theme.spacing.sm,props=>props.theme.spacing.md,props=>props.theme.borderRadius,props=>{switch(props.status){case'running':return'#fff3cd';case'completed':return'#d4edda';case'failed':return'#f8d7da';case'blocked':return'#f5c6cb';case'stopped':return'#e2e3e5';default:return'#f8f9fa';}},props=>{switch(props.status){case'running':return'#856404';case'completed':return'#155724';case'failed':return'#721c24';case'blocked':return'#721c24';case'stopped':return'#383d41';default:return'#6c757d';}});const LoadingSpinner=styled.div(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  height: 200px;\\n  font-size: 1.2rem;\\n  color: \",\";\\n\"])),props=>props.theme.colors.gray);const ErrorMessage=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n  background: #fee;\\n  color: \",\";\\n  padding: \",\";\\n  border-radius: \",\";\\n  text-align: center;\\n  margin: \",\" 0;\\n\"])),props=>props.theme.colors.danger,props=>props.theme.spacing.lg,props=>props.theme.borderRadius,props=>props.theme.spacing.lg);const InfoBox=styled.div(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\\n  background: #e7f3ff;\\n  color: #0066cc;\\n  padding: \",\";\\n  border-radius: \",\";\\n  border: 1px solid #b3d9ff;\\n  margin-bottom: \",\";\\n\"])),props=>props.theme.spacing.lg,props=>props.theme.borderRadius,props=>props.theme.spacing.lg);const Scraping=()=>{var _logs$logs;const queryClient=useQueryClient();const[isStarting,setIsStarting]=useState(false);const[isStopping,setIsStopping]=useState(false);// Fetch scraping status\nconst{data:status,isLoading:statusLoading,error:statusError}=useQuery('scraping-status',()=>axios.get('/api/scraping/status').then(res=>res.data),{refetchInterval:5000}// Refetch every 5 seconds\n);// Fetch scraping logs\nconst{data:logs,isLoading:logsLoading,error:logsError}=useQuery('scraping-logs',()=>axios.get('/api/scraping/logs?per_page=50').then(res=>res.data));// Start scraping mutation\nconst startScrapingMutation=useMutation(()=>axios.post('/api/scraping/start'),{onSuccess:()=>{toast.success('Scraping started successfully!');queryClient.invalidateQueries('scraping-status');},onError:error=>{var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to start scraping');}});// Stop scraping mutation\nconst stopScrapingMutation=useMutation(()=>axios.post('/api/scraping/stop'),{onSuccess:()=>{toast.success('Scraping stopped successfully!');queryClient.invalidateQueries('scraping-status');},onError:error=>{var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to stop scraping');}});const handleStartScraping=async()=>{setIsStarting(true);try{await startScrapingMutation.mutateAsync();}finally{setIsStarting(false);}};const handleStopScraping=async()=>{setIsStopping(true);try{await stopScrapingMutation.mutateAsync();}finally{setIsStopping(false);}};const formatDate=dateString=>{return new Date(dateString).toLocaleString();};const formatDuration=(startedAt,completedAt)=>{if(!startedAt)return'N/A';const start=new Date(startedAt);const end=completedAt?new Date(completedAt):new Date();const duration=Math.floor((end-start)/1000);if(duration<60)return\"\".concat(duration,\"s\");if(duration<3600)return\"\".concat(Math.floor(duration/60),\"m \").concat(duration%60,\"s\");return\"\".concat(Math.floor(duration/3600),\"h \").concat(Math.floor(duration%3600/60),\"m\");};if(statusLoading){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(LoadingSpinner,{children:\"Loading scraping status...\"})});}if(statusError){return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsx(ErrorMessage,{children:\"Error loading scraping status. Please try again later.\"})});}const isRunning=(status===null||status===void 0?void 0:status.is_running)||false;const runningScrapes=(status===null||status===void 0?void 0:status.running_scrapes)||[];const recentLogs=(status===null||status===void 0?void 0:status.recent_logs)||[];return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Title,{children:\"Scraping Management\"}),/*#__PURE__*/_jsxs(InfoBox,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"How it works:\"}),\" The scraping system automatically collects car listings from multiple Irish websites. It runs daily and processes listings to detect duplicates, calculate deal scores, and send email notifications. You can manually start/stop scraping and monitor the progress here.\"]}),/*#__PURE__*/_jsxs(Section,{children:[/*#__PURE__*/_jsx(SectionTitle,{children:\"Current Status\"}),/*#__PURE__*/_jsxs(StatusCard,{children:[/*#__PURE__*/_jsxs(StatusItem,{status:isRunning?'running':'completed',children:[/*#__PURE__*/_jsx(StatusValue,{children:isRunning?'ðŸ”„':'âœ…'}),/*#__PURE__*/_jsx(StatusLabel,{children:isRunning?'Scraping in Progress':'Idle'})]}),/*#__PURE__*/_jsxs(StatusItem,{children:[/*#__PURE__*/_jsx(StatusValue,{children:runningScrapes.length}),/*#__PURE__*/_jsx(StatusLabel,{children:\"Active Jobs\"})]}),/*#__PURE__*/_jsxs(StatusItem,{children:[/*#__PURE__*/_jsx(StatusValue,{children:recentLogs.length}),/*#__PURE__*/_jsx(StatusLabel,{children:\"Recent Jobs\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{onClick:handleStartScraping,disabled:isStarting||isRunning,variant:\"success\",children:isStarting?'Starting...':'Start Scraping'}),/*#__PURE__*/_jsx(Button,{onClick:handleStopScraping,disabled:isStopping||!isRunning,variant:\"danger\",children:isStopping?'Stopping...':'Stop Scraping'})]})]}),runningScrapes.length>0&&/*#__PURE__*/_jsxs(Section,{children:[/*#__PURE__*/_jsx(SectionTitle,{children:\"Currently Running\"}),/*#__PURE__*/_jsxs(LogsTable,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(TableHeader,{children:\"Site\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Started\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Duration\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Status\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Progress\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:runningScrapes.map(log=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(TableCell,{children:log.site_name}),/*#__PURE__*/_jsx(TableCell,{children:formatDate(log.started_at)}),/*#__PURE__*/_jsx(TableCell,{children:formatDuration(log.started_at,log.completed_at)}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(StatusBadge,{status:log.status,children:log.status.toUpperCase()})}),/*#__PURE__*/_jsxs(TableCell,{children:[log.pages_scraped,\" pages, \",log.listings_found,\" listings\"]})]},log.id))})]})]}),/*#__PURE__*/_jsxs(Section,{children:[/*#__PURE__*/_jsx(SectionTitle,{children:\"Recent Scraping Logs\"}),logsLoading?/*#__PURE__*/_jsx(LoadingSpinner,{children:\"Loading logs...\"}):logsError?/*#__PURE__*/_jsx(ErrorMessage,{children:\"Error loading logs. Please try again later.\"}):/*#__PURE__*/_jsxs(LogsTable,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(TableHeader,{children:\"Site\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Started\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Completed\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Duration\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Status\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Listings\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Pages\"}),/*#__PURE__*/_jsx(TableHeader,{children:\"Errors\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:logs===null||logs===void 0?void 0:(_logs$logs=logs.logs)===null||_logs$logs===void 0?void 0:_logs$logs.map(log=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(TableCell,{children:log.site_name}),/*#__PURE__*/_jsx(TableCell,{children:formatDate(log.started_at)}),/*#__PURE__*/_jsx(TableCell,{children:log.completed_at?formatDate(log.completed_at):'-'}),/*#__PURE__*/_jsx(TableCell,{children:formatDuration(log.started_at,log.completed_at)}),/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(StatusBadge,{status:log.status,children:log.status.toUpperCase()}),log.is_blocked&&/*#__PURE__*/_jsx(\"span\",{style:{color:'#e74c3c',marginLeft:'5px'},children:\"\\uD83D\\uDEAB\"})]}),/*#__PURE__*/_jsxs(TableCell,{children:[log.listings_found,\" found\",log.listings_new>0&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.8rem',color:'#27ae60'},children:[\"+\",log.listings_new,\" new\"]}),log.listings_updated>0&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.8rem',color:'#f39c12'},children:[log.listings_updated,\" updated\"]}),log.listings_removed>0&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.8rem',color:'#e74c3c'},children:[\"-\",log.listings_removed,\" removed\"]})]}),/*#__PURE__*/_jsx(TableCell,{children:log.pages_scraped}),/*#__PURE__*/_jsx(TableCell,{children:log.errors&&log.errors.length>0?/*#__PURE__*/_jsxs(\"span\",{style:{color:'#e74c3c'},children:[log.errors.length,\" error(s)\"]}):'-'})]},log.id))})]})]}),recentLogs.length>0&&/*#__PURE__*/_jsxs(Section,{children:[/*#__PURE__*/_jsx(SectionTitle,{children:\"Last 24 Hours Summary\"}),/*#__PURE__*/_jsxs(StatusCard,{children:[/*#__PURE__*/_jsxs(StatusItem,{children:[/*#__PURE__*/_jsx(StatusValue,{children:recentLogs.reduce((total,log)=>total+(log.listings_found||0),0)}),/*#__PURE__*/_jsx(StatusLabel,{children:\"Total Listings Found\"})]}),/*#__PURE__*/_jsxs(StatusItem,{children:[/*#__PURE__*/_jsx(StatusValue,{children:recentLogs.reduce((total,log)=>total+(log.listings_new||0),0)}),/*#__PURE__*/_jsx(StatusLabel,{children:\"New Listings\"})]}),/*#__PURE__*/_jsxs(StatusItem,{children:[/*#__PURE__*/_jsx(StatusValue,{children:recentLogs.reduce((total,log)=>total+(log.pages_scraped||0),0)}),/*#__PURE__*/_jsx(StatusLabel,{children:\"Pages Scraped\"})]}),/*#__PURE__*/_jsxs(StatusItem,{children:[/*#__PURE__*/_jsx(StatusValue,{children:recentLogs.filter(log=>log.is_blocked).length}),/*#__PURE__*/_jsx(StatusLabel,{children:\"Blocked Sites\"})]})]})]})]});};export default Scraping;","map":{"version":3,"names":["React","useState","useQuery","useMutation","useQueryClient","styled","axios","toast","jsx","_jsx","jsxs","_jsxs","Container","div","_templateObject","_taggedTemplateLiteral","props","theme","spacing","lg","Title","h1","_templateObject2","colors","primary","xl","Section","_templateObject3","white","borderRadius","boxShadow","SectionTitle","h2","_templateObject4","StatusCard","_templateObject5","StatusItem","_templateObject6","status","StatusValue","_templateObject7","sm","StatusLabel","_templateObject8","gray","Button","button","_templateObject9","variant","danger","success","secondary","md","lightGray","LogsTable","table","_templateObject0","TableHeader","th","_templateObject1","light","dark","TableCell","td","_templateObject10","StatusBadge","span","_templateObject11","LoadingSpinner","_templateObject12","ErrorMessage","_templateObject13","InfoBox","_templateObject14","Scraping","_logs$logs","queryClient","isStarting","setIsStarting","isStopping","setIsStopping","data","isLoading","statusLoading","error","statusError","get","then","res","refetchInterval","logs","logsLoading","logsError","startScrapingMutation","post","onSuccess","invalidateQueries","onError","_error$response","_error$response$data","response","stopScrapingMutation","_error$response2","_error$response2$data","handleStartScraping","mutateAsync","handleStopScraping","formatDate","dateString","Date","toLocaleString","formatDuration","startedAt","completedAt","start","end","duration","Math","floor","concat","children","isRunning","is_running","runningScrapes","running_scrapes","recentLogs","recent_logs","length","onClick","disabled","map","log","site_name","started_at","completed_at","toUpperCase","pages_scraped","listings_found","id","is_blocked","style","color","marginLeft","listings_new","fontSize","listings_updated","listings_removed","errors","reduce","total","filter"],"sources":["/Users/oos/oos_projects/auto-finder/src/pages/Scraping.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from 'react-query';\nimport styled from 'styled-components';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\n\nconst Container = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: ${props => props.theme.spacing.lg};\n`;\n\nconst Title = styled.h1`\n  color: ${props => props.theme.colors.primary};\n  margin-bottom: ${props => props.theme.spacing.xl};\n`;\n\nconst Section = styled.div`\n  background: ${props => props.theme.colors.white};\n  padding: ${props => props.theme.spacing.lg};\n  border-radius: ${props => props.theme.borderRadius};\n  box-shadow: ${props => props.theme.boxShadow};\n  margin-bottom: ${props => props.theme.spacing.lg};\n`;\n\nconst SectionTitle = styled.h2`\n  color: ${props => props.theme.colors.primary};\n  margin-bottom: ${props => props.theme.spacing.lg};\n  font-size: 1.3rem;\n`;\n\nconst StatusCard = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: ${props => props.theme.spacing.lg};\n  margin-bottom: ${props => props.theme.spacing.lg};\n`;\n\nconst StatusItem = styled.div`\n  text-align: center;\n  padding: ${props => props.theme.spacing.lg};\n  border-radius: ${props => props.theme.borderRadius};\n  background: ${props => {\n    switch (props.status) {\n      case 'running': return '#fff3cd';\n      case 'completed': return '#d4edda';\n      case 'failed': return '#f8d7da';\n      case 'blocked': return '#f5c6cb';\n      default: return '#f8f9fa';\n    }\n  }};\n  border: 2px solid ${props => {\n    switch (props.status) {\n      case 'running': return '#ffeaa7';\n      case 'completed': return '#c3e6cb';\n      case 'failed': return '#f1b0b7';\n      case 'blocked': return '#f1aeb5';\n      default: return '#dee2e6';\n    }\n  }};\n`;\n\nconst StatusValue = styled.div`\n  font-size: 2rem;\n  font-weight: bold;\n  color: ${props => props.theme.colors.primary};\n  margin-bottom: ${props => props.theme.spacing.sm};\n`;\n\nconst StatusLabel = styled.div`\n  color: ${props => props.theme.colors.gray};\n  font-weight: 500;\n`;\n\nconst Button = styled.button`\n  background: ${props => {\n    switch (props.variant) {\n      case 'danger': return props.theme.colors.danger;\n      case 'success': return props.theme.colors.success;\n      default: return props.theme.colors.secondary;\n    }\n  }};\n  color: ${props => props.theme.colors.white};\n  padding: ${props => props.theme.spacing.md} ${props => props.theme.spacing.lg};\n  border-radius: ${props => props.theme.borderRadius};\n  border: none;\n  font-size: 1rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  margin-right: ${props => props.theme.spacing.md};\n  margin-bottom: ${props => props.theme.spacing.md};\n  \n  &:hover {\n    background: ${props => {\n      switch (props.variant) {\n        case 'danger': return '#c0392b';\n        case 'success': return '#229954';\n        default: return '#2980b9';\n      }\n    }};\n  }\n  \n  &:disabled {\n    background: ${props => props.theme.colors.lightGray};\n    cursor: not-allowed;\n  }\n`;\n\nconst LogsTable = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: ${props => props.theme.spacing.lg};\n`;\n\nconst TableHeader = styled.th`\n  background: ${props => props.theme.colors.light};\n  padding: ${props => props.theme.spacing.md};\n  text-align: left;\n  font-weight: 500;\n  color: ${props => props.theme.colors.dark};\n  border-bottom: 2px solid ${props => props.theme.colors.lightGray};\n`;\n\nconst TableCell = styled.td`\n  padding: ${props => props.theme.spacing.md};\n  border-bottom: 1px solid ${props => props.theme.colors.lightGray};\n`;\n\nconst StatusBadge = styled.span`\n  padding: ${props => props.theme.spacing.sm} ${props => props.theme.spacing.md};\n  border-radius: ${props => props.theme.borderRadius};\n  font-size: 0.8rem;\n  font-weight: 500;\n  background: ${props => {\n    switch (props.status) {\n      case 'running': return '#fff3cd';\n      case 'completed': return '#d4edda';\n      case 'failed': return '#f8d7da';\n      case 'blocked': return '#f5c6cb';\n      case 'stopped': return '#e2e3e5';\n      default: return '#f8f9fa';\n    }\n  }};\n  color: ${props => {\n    switch (props.status) {\n      case 'running': return '#856404';\n      case 'completed': return '#155724';\n      case 'failed': return '#721c24';\n      case 'blocked': return '#721c24';\n      case 'stopped': return '#383d41';\n      default: return '#6c757d';\n    }\n  }};\n`;\n\nconst LoadingSpinner = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 200px;\n  font-size: 1.2rem;\n  color: ${props => props.theme.colors.gray};\n`;\n\nconst ErrorMessage = styled.div`\n  background: #fee;\n  color: ${props => props.theme.colors.danger};\n  padding: ${props => props.theme.spacing.lg};\n  border-radius: ${props => props.theme.borderRadius};\n  text-align: center;\n  margin: ${props => props.theme.spacing.lg} 0;\n`;\n\nconst InfoBox = styled.div`\n  background: #e7f3ff;\n  color: #0066cc;\n  padding: ${props => props.theme.spacing.lg};\n  border-radius: ${props => props.theme.borderRadius};\n  border: 1px solid #b3d9ff;\n  margin-bottom: ${props => props.theme.spacing.lg};\n`;\n\nconst Scraping = () => {\n  const queryClient = useQueryClient();\n  const [isStarting, setIsStarting] = useState(false);\n  const [isStopping, setIsStopping] = useState(false);\n\n  // Fetch scraping status\n  const { data: status, isLoading: statusLoading, error: statusError } = useQuery(\n    'scraping-status',\n    () => axios.get('/api/scraping/status').then(res => res.data),\n    { refetchInterval: 5000 } // Refetch every 5 seconds\n  );\n\n  // Fetch scraping logs\n  const { data: logs, isLoading: logsLoading, error: logsError } = useQuery(\n    'scraping-logs',\n    () => axios.get('/api/scraping/logs?per_page=50').then(res => res.data)\n  );\n\n  // Start scraping mutation\n  const startScrapingMutation = useMutation(\n    () => axios.post('/api/scraping/start'),\n    {\n      onSuccess: () => {\n        toast.success('Scraping started successfully!');\n        queryClient.invalidateQueries('scraping-status');\n      },\n      onError: (error) => {\n        toast.error(error.response?.data?.error || 'Failed to start scraping');\n      },\n    }\n  );\n\n  // Stop scraping mutation\n  const stopScrapingMutation = useMutation(\n    () => axios.post('/api/scraping/stop'),\n    {\n      onSuccess: () => {\n        toast.success('Scraping stopped successfully!');\n        queryClient.invalidateQueries('scraping-status');\n      },\n      onError: (error) => {\n        toast.error(error.response?.data?.error || 'Failed to stop scraping');\n      },\n    }\n  );\n\n  const handleStartScraping = async () => {\n    setIsStarting(true);\n    try {\n      await startScrapingMutation.mutateAsync();\n    } finally {\n      setIsStarting(false);\n    }\n  };\n\n  const handleStopScraping = async () => {\n    setIsStopping(true);\n    try {\n      await stopScrapingMutation.mutateAsync();\n    } finally {\n      setIsStopping(false);\n    }\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleString();\n  };\n\n  const formatDuration = (startedAt, completedAt) => {\n    if (!startedAt) return 'N/A';\n    \n    const start = new Date(startedAt);\n    const end = completedAt ? new Date(completedAt) : new Date();\n    const duration = Math.floor((end - start) / 1000);\n    \n    if (duration < 60) return `${duration}s`;\n    if (duration < 3600) return `${Math.floor(duration / 60)}m ${duration % 60}s`;\n    return `${Math.floor(duration / 3600)}h ${Math.floor((duration % 3600) / 60)}m`;\n  };\n\n  if (statusLoading) {\n    return (\n      <Container>\n        <LoadingSpinner>Loading scraping status...</LoadingSpinner>\n      </Container>\n    );\n  }\n\n  if (statusError) {\n    return (\n      <Container>\n        <ErrorMessage>\n          Error loading scraping status. Please try again later.\n        </ErrorMessage>\n      </Container>\n    );\n  }\n\n  const isRunning = status?.is_running || false;\n  const runningScrapes = status?.running_scrapes || [];\n  const recentLogs = status?.recent_logs || [];\n\n  return (\n    <Container>\n      <Title>Scraping Management</Title>\n\n      <InfoBox>\n        <strong>How it works:</strong> The scraping system automatically collects car listings from multiple Irish websites. \n        It runs daily and processes listings to detect duplicates, calculate deal scores, and send email notifications. \n        You can manually start/stop scraping and monitor the progress here.\n      </InfoBox>\n\n      {/* Current Status */}\n      <Section>\n        <SectionTitle>Current Status</SectionTitle>\n        <StatusCard>\n          <StatusItem status={isRunning ? 'running' : 'completed'}>\n            <StatusValue>{isRunning ? 'ðŸ”„' : 'âœ…'}</StatusValue>\n            <StatusLabel>\n              {isRunning ? 'Scraping in Progress' : 'Idle'}\n            </StatusLabel>\n          </StatusItem>\n          \n          <StatusItem>\n            <StatusValue>{runningScrapes.length}</StatusValue>\n            <StatusLabel>Active Jobs</StatusLabel>\n          </StatusItem>\n          \n          <StatusItem>\n            <StatusValue>{recentLogs.length}</StatusValue>\n            <StatusLabel>Recent Jobs</StatusLabel>\n          </StatusItem>\n        </StatusCard>\n\n        <div>\n          <Button\n            onClick={handleStartScraping}\n            disabled={isStarting || isRunning}\n            variant=\"success\"\n          >\n            {isStarting ? 'Starting...' : 'Start Scraping'}\n          </Button>\n          \n          <Button\n            onClick={handleStopScraping}\n            disabled={isStopping || !isRunning}\n            variant=\"danger\"\n          >\n            {isStopping ? 'Stopping...' : 'Stop Scraping'}\n          </Button>\n        </div>\n      </Section>\n\n      {/* Running Jobs */}\n      {runningScrapes.length > 0 && (\n        <Section>\n          <SectionTitle>Currently Running</SectionTitle>\n          <LogsTable>\n            <thead>\n              <tr>\n                <TableHeader>Site</TableHeader>\n                <TableHeader>Started</TableHeader>\n                <TableHeader>Duration</TableHeader>\n                <TableHeader>Status</TableHeader>\n                <TableHeader>Progress</TableHeader>\n              </tr>\n            </thead>\n            <tbody>\n              {runningScrapes.map((log) => (\n                <tr key={log.id}>\n                  <TableCell>{log.site_name}</TableCell>\n                  <TableCell>{formatDate(log.started_at)}</TableCell>\n                  <TableCell>{formatDuration(log.started_at, log.completed_at)}</TableCell>\n                  <TableCell>\n                    <StatusBadge status={log.status}>\n                      {log.status.toUpperCase()}\n                    </StatusBadge>\n                  </TableCell>\n                  <TableCell>\n                    {log.pages_scraped} pages, {log.listings_found} listings\n                  </TableCell>\n                </tr>\n              ))}\n            </tbody>\n          </LogsTable>\n        </Section>\n      )}\n\n      {/* Recent Logs */}\n      <Section>\n        <SectionTitle>Recent Scraping Logs</SectionTitle>\n        {logsLoading ? (\n          <LoadingSpinner>Loading logs...</LoadingSpinner>\n        ) : logsError ? (\n          <ErrorMessage>Error loading logs. Please try again later.</ErrorMessage>\n        ) : (\n          <LogsTable>\n            <thead>\n              <tr>\n                <TableHeader>Site</TableHeader>\n                <TableHeader>Started</TableHeader>\n                <TableHeader>Completed</TableHeader>\n                <TableHeader>Duration</TableHeader>\n                <TableHeader>Status</TableHeader>\n                <TableHeader>Listings</TableHeader>\n                <TableHeader>Pages</TableHeader>\n                <TableHeader>Errors</TableHeader>\n              </tr>\n            </thead>\n            <tbody>\n              {logs?.logs?.map((log) => (\n                <tr key={log.id}>\n                  <TableCell>{log.site_name}</TableCell>\n                  <TableCell>{formatDate(log.started_at)}</TableCell>\n                  <TableCell>\n                    {log.completed_at ? formatDate(log.completed_at) : '-'}\n                  </TableCell>\n                  <TableCell>\n                    {formatDuration(log.started_at, log.completed_at)}\n                  </TableCell>\n                  <TableCell>\n                    <StatusBadge status={log.status}>\n                      {log.status.toUpperCase()}\n                    </StatusBadge>\n                    {log.is_blocked && (\n                      <span style={{ color: '#e74c3c', marginLeft: '5px' }}>ðŸš«</span>\n                    )}\n                  </TableCell>\n                  <TableCell>\n                    {log.listings_found} found\n                    {log.listings_new > 0 && (\n                      <div style={{ fontSize: '0.8rem', color: '#27ae60' }}>\n                        +{log.listings_new} new\n                      </div>\n                    )}\n                    {log.listings_updated > 0 && (\n                      <div style={{ fontSize: '0.8rem', color: '#f39c12' }}>\n                        {log.listings_updated} updated\n                      </div>\n                    )}\n                    {log.listings_removed > 0 && (\n                      <div style={{ fontSize: '0.8rem', color: '#e74c3c' }}>\n                        -{log.listings_removed} removed\n                      </div>\n                    )}\n                  </TableCell>\n                  <TableCell>{log.pages_scraped}</TableCell>\n                  <TableCell>\n                    {log.errors && log.errors.length > 0 ? (\n                      <span style={{ color: '#e74c3c' }}>\n                        {log.errors.length} error(s)\n                      </span>\n                    ) : (\n                      '-'\n                    )}\n                  </TableCell>\n                </tr>\n              ))}\n            </tbody>\n          </LogsTable>\n        )}\n      </Section>\n\n      {/* Statistics */}\n      {recentLogs.length > 0 && (\n        <Section>\n          <SectionTitle>Last 24 Hours Summary</SectionTitle>\n          <StatusCard>\n            <StatusItem>\n              <StatusValue>\n                {recentLogs.reduce((total, log) => total + (log.listings_found || 0), 0)}\n              </StatusValue>\n              <StatusLabel>Total Listings Found</StatusLabel>\n            </StatusItem>\n            \n            <StatusItem>\n              <StatusValue>\n                {recentLogs.reduce((total, log) => total + (log.listings_new || 0), 0)}\n              </StatusValue>\n              <StatusLabel>New Listings</StatusLabel>\n            </StatusItem>\n            \n            <StatusItem>\n              <StatusValue>\n                {recentLogs.reduce((total, log) => total + (log.pages_scraped || 0), 0)}\n              </StatusValue>\n              <StatusLabel>Pages Scraped</StatusLabel>\n            </StatusItem>\n            \n            <StatusItem>\n              <StatusValue>\n                {recentLogs.filter(log => log.is_blocked).length}\n              </StatusValue>\n              <StatusLabel>Blocked Sites</StatusLabel>\n            </StatusItem>\n          </StatusCard>\n        </Section>\n      )}\n    </Container>\n  );\n};\n\nexport default Scraping;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}